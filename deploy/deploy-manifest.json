{
  "app": "Whylee",
  "version": "v9.0.0",
  "build": {
    "createdAt": "${ISO_DATETIME_ON_COMMIT}",
    "commit": "${GIT_SHA}",
    "branch": "${GIT_BRANCH}"
  },
  "hosting": {
    "platform": "netlify",
    "publishDir": ".",
    "spaFallback": "/index.html",
    "redirects": [
      { "from": "/createCheckoutSession", "to": "https://REGION-PROJECT.cloudfunctions.net/createCheckoutSession", "status": 200, "force": true },
      { "from": "/stripeWebhook",         "to": "https://REGION-PROJECT.cloudfunctions.net/stripeWebhook",         "status": 200, "force": true },
      { "from": "/linkPurchaseToken",     "to": "https://REGION-PROJECT.cloudfunctions.net/linkPurchaseToken",     "status": 200, "force": true },
      { "from": "/verifyPlay",            "to": "https://REGION-PROJECT.cloudfunctions.net/verifyPlay",            "status": 200, "force": true },
      { "from": "/health",                "to": "https://REGION-PROJECT.cloudfunctions.net/health",                "status": 200, "force": true },
      { "from": "/logIngest",             "to": "https://REGION-PROJECT.cloudfunctions.net/logIngest",             "status": 200, "force": true },
      { "from": "/*",                     "to": "/index.html",                                                     "status": 200 }
    ]
  },
  "functions": {
    "platform": "firebase",
    "region": "REGION",
    "projectId": "PROJECT_ID",
    "endpoints": {
      "createCheckoutSession": "https://REGION-PROJECT.cloudfunctions.net/createCheckoutSession",
      "stripeWebhook": "https://REGION-PROJECT.cloudfunctions.net/stripeWebhook",
      "linkPurchaseToken": "https://REGION-PROJECT.cloudfunctions.net/linkPurchaseToken",
      "verifyPlay": "https://REGION-PROJECT.cloudfunctions.net/verifyPlay",
      "health": "https://REGION-PROJECT.cloudfunctions.net/health",
      "logIngest": "https://REGION-PROJECT.cloudfunctions.net/logIngest"
    }
  },
  "environment": {
    "netlify": {
      "VITE_FIREBASE_API_KEY": "****",
      "VITE_FIREBASE_AUTH_DOMAIN": "****",
      "VITE_FIREBASE_PROJECT_ID": "****",
      "VITE_FIREBASE_STORAGE_BUCKET": "****",
      "VITE_FIREBASE_MESSAGING_SENDER_ID": "****",
      "VITE_FIREBASE_APP_ID": "****",
      "VITE_FIREBASE_MEASUREMENT_ID": "****",
      "VITE_STRIPE_PUBLISHABLE_KEY": "****",
      "STRIPE_PRICE_PRO_MONTHLY": "****",
      "VITE_ADSENSE_CLIENT": "****",
      "VITE_ADSENSE_SLOT_FOOTER": "****",
      "VITE_ENABLE_ADS": "true",
      "VITE_ENABLE_PLAY_BILLING": "true",
      "VITE_ENABLE_PRO_AVATARS": "true"
    },
    "firebaseFunctions": {
      "STRIPE_SECRET": "****",
      "STRIPE_WEBHOOK_SECRET": "****",
      "PLAY_PACKAGE_NAME": "app.whylee",
      "GOOGLE_PLAY_SERVICE_ACCOUNT": "{...service account json...}"
    },
    "github": {
      "HEALTH_URL": "https://YOUR-SITE.netlify.app/health"
    }
  },
  "routes": {
    "publicPages": [
      "/",
      "/pro.html",
      "/game.html",
      "/profile.html",
      "/leaderboard.html",
      "/privacy.html",
      "/terms.html",
      "/admin.html",
      "/admin-monitor.html",
      "/promo/storyboard/storyboard-grid.html",
      "/promo/storyboard/storyboard-grid-animated.html"
    ]
  },
  "assets": {
    "css": [
      "/styles/brand.css?v=9010",
      "/styles/style.css?v=9010",
      "/styles/base.css?v=9010",
      "/styles/hud.css?v=9010",
      "/styles/streakBar.css?v=9010",
      "/styles/animations.css?v=9010",
      "/styles/ads.css?v=9010",
      "/styles/dark.css?v=9010"
    ],
    "scripts": [
      "/scripts/game.js?v=9010",
      "/scripts/ui/streakBar.js?v=9010",
      "/scripts/components/pips.js?v=9010",
      "/scripts/components/avatarBadge.js?v=9010",
      "/scripts/ai/questionEngine.js?v=9010",
      "/scripts/entitlements.js?v=9010",
      "/scripts/ui/posterManager.js?v=9010",
      "/scripts/payments/play.js?v=9010",
      "/scripts/ads/consentManager.js?v=9010",
      "/scripts/ads/adsense.js?v=9010",
      "/scripts/ops/logClient.js?v=9010",
      "/scripts/admin/monitor.js?v=9010"
    ],
    "mediaGlobs": [
      "/media/**",
      "/icons/**",
      "/promo/storyboard/**"
    ]
  },
  "checks": {
    "healthUrl": "/health",
    "successStatus": 200,
    "maxLatencyMs": 500
  },
  "notes": [
    "Replace REGION-PROJECT with your Functions region and projectId in netlify.toml and this file.",
    "Set Netlify env vars before deploy.",
    "Confirm RTDN Pub/Sub -> functions: playBillingRtdn wired."
  ]
}
